# when using the default proxy server port
local_backend: true

backend:
  name: git-gateway
  branch: main # Branch to update (optional; defaults to master)

# These lines should *not* be indented
media_folder: "static/images/uploads" # Media files will be stored in the repo under static/images/uploads
public_folder: "/images/uploads" # The src attribute for uploaded media will begin with /images/uploads

collections:
  - name: "posts" # Used in routes, e.g., /admin/collections/blog
    label: "Posts" # Used in the UI
    folder: "content/posts" # The path to the folder where the documents are stored
    slug: "{{slug}}" # Filename template, e.g., YYYY-MM-DD-title.md
    #preview_path: posts/{{slug}}
    create: true # Allow users to create new documents in this collection
    view_groups:
      - label: Year
        field: date
        pattern: \d{4}
    editor:
      preview: false
    filter:
      field: layout
      value: post
    fields: # The fields for each document, usually in front matter
      - { label: "Title", name: "title", widget: "string" }
      - {
          label: "Featured Image",
          name: "image",
          widget: "image",
          required: true,
        }
      - { label: "Body", name: "body", widget: "markdown" }
      - { label: "Publish Date", name: "date", widget: "datetime" }
      - {
          label: "Categories",
          name: "categories",
          widget: "relation",
          collection: "categories",
          multiple: true,
          search_fields: ["title"],
          display_fields: ["title"],
          value_field: "title",
          required: false,
        }
      - {
          label: "Tags",
          name: "tags",
          widget: "relation",
          collection: "tags",
          multiple: true,
          search_fields: ["title"],
          display_fields: ["title"],
          value_field: "title",
          required: false,
        }
      - { 
        label: "Layout", 
        name: "layout", 
        widget: "select", 
        default: "post",
        options: ["post", "gallery"]
        }
    # use dot notation for nested fields
    sortable_fields: ["title", "commit_date"]

  - name: "gallery" # Used in routes, e.g., /admin/collections/blog
    label: "Gallery" # Used in the UI
    folder: "content/posts" # The path to the folder where the documents are stored
    slug: "{{slug}}" # Filename template, e.g., YYYY-MM-DD-title.md
    #preview_path: posts/{{slug}}
    create: true # Allow users to create new documents in this collection
    view_groups:
      - label: Year
        field: date
        pattern: \d{4}
    editor:
      preview: false
    filter:
      field: layout
      value: gallery
    fields: # The fields for each document, usually in front matter
      - { label: "Title", name: "title", widget: "string" }
      - {
          label: "Featured Image",
          name: "image",
          widget: "image",
          required: true,
        }
      - { label: "Body", name: "body", widget: "markdown", default: "{{< gallery caption-position=\"none\" >}}{{< /gallery >}}{{< load-photoswipe >}}", minimal: true }
      - { label: "Photo gallery", name: "gallery", widget: "image", choose_url: true, media_library: {config: {multiple: true, max_files: 999}}, required: true}
      - { label: "Publish Date", name: "date", widget: "datetime" }
      - {
          label: "Categories",
          name: "categories",
          widget: "relation",
          collection: "categories",
          multiple: true,
          search_fields: ["title"],
          display_fields: ["title"],
          value_field: "title",
          required: false,
        }
      - {
          label: "Tags",
          name: "tags",
          widget: "relation",
          collection: "tags",
          multiple: true,
          search_fields: ["title"],
          display_fields: ["title"],
          value_field: "title",
          required: false,
        }
      - { 
        label: "Layout", 
        name: "layout", 
        widget: "select", 
        default: "gallery",
        options: ["post", "gallery"]
        }
    # use dot notation for nested fields
    sortable_fields: ["title", "commit_date"]

  - name: "tags" # Used in routes, e.g., /admin/collections/blog
    label: "Tag" # Used in the UI
    folder: "content/labels" # The path to the folder where the documents are stored
    create: true # Allow users to create new documents in this collection
    editor:
      preview: false
    fields: # The fields for each document, usually in front matter
      - { label: "Tag", name: "title", widget: "string" }

  - name: "categories" # Used in routes, e.g., /admin/collections/blog
    label: "Category" # Used in the UI
    folder: "content/categories" # The path to the folder where the documents are stored
    create: true # Allow users to create new documents in this collection
    editor:
      preview: false
    fields: # The fields for each document, usually in front matter
      - { label: "Category", name: "title", widget: "string" }

  - name: "settings"
    label: "Setting"
    delete: false # Prevent users from deleting documents in this collection
    editor:
      preview: false
    files:
      - name: "general"
        label: "Site Settings"
        file: "_data/settings.json"
        description: "General Site Settings"
        fields:
          - { label: "Global title", name: "site_title", widget: "string" }
          - label: "Post Settings"
            name: posts
            widget: "object"
            fields:
              - {
                  label: "Number of posts on frontpage",
                  name: front_limit,
                  widget: number,
                  min: 1,
                  max: 10,
                }
              - { label: "Default Author", name: author, widget: string }
              - {
                  label: "Default Thumbnail",
                  name: thumb,
                  widget: image,
                  class: "thumb",
                  required: false,
                }
          - label: "Home Section"
            name: "sections"
            widget: "list"
            types:
              - label: "Carousel"
                name: "carousel"
                widget: object
                summary: "{{fields.header}}"
                fields:
                  - {
                      label: Header,
                      name: header,
                      widget: string,
                      default: "Image Gallery",
                    }
                  - {
                      label: Template,
                      name: template,
                      widget: string,
                      default: "carousel.html",
                    }
                  - label: Images
                    name: images
                    widget: list
                    field: { label: Image, name: image, widget: image }
              - label: "Spotlight"
                name: "spotlight"
                widget: object
                fields:
                  - {
                      label: Header,
                      name: header,
                      widget: string,
                      default: "Spotlight",
                    }
                  - {
                      label: Template,
                      name: template,
                      widget: string,
                      default: "spotlight.html",
                    }
                  - {
                      label: Text,
                      name: text,
                      widget: text,
                      default: "Hello World",
                    }
